angular.module('portfolio')
<<<<<<< HEAD
.service('authenticate', function($http,$window,$location) {
  this.login = function(email,password) {
    console.log("inside auhtenticate");
    var loginCredentials = { "email":email,"password":password }
    return $http.post('/api/authenticate',loginCredentials).success(function (user) {
      // $scope.userProfile=token;
      // console.log($scope.userProfile);
      $window.localStorage["authToken"] = user.token;
      $window.localStorage["userId"] = user.userId;
      $window.location.href = "http://localhost:8080/profile/"+user.userId;
    });
  };
});
=======
 .service('authenticate', function($http,$window,$location) {

       this.login = function(email,password) {
         //console.log($window.localStorage["authToken"]);
        //  console.log("post");
         var loginCredentials = { "email":email,"password":password}

              return $http.post('/authenticate',loginCredentials).success(function (token) {
                  // console.log("token");

                  // var base64Url = token.split('.')[1];
                  // console.log(base64Url);
                  // var base64 = base64Url.replace('-', '+').replace('_', '/');
                  // console.log(JSON.parse($window.atob(base64)));

                  $window.localStorage["authToken"] = token;
                  console.log(token);
                  $window.location.href = "http://localhost:8080/index2.html";
                  //$window.localStorage.removeItem("authToken");     //for logout
                });
              // var req = {
              //    method: 'POST',
              //    url: '/api/authenticate',
              //    headers: {
              //      'x-access-token': $window.localStorage["authToken"]
              //    },
              //    data: object
              // };
              //
              // return $http(req).success(function (token) {
              //   console.log(token);
              //       var base64Url = token.split('.')[1];
              //       console.log(base64Url);
              //       var base64 = base64Url.replace('-', '+').replace('_', '/');
              //       console.log(JSON.parse($window.atob(base64)));
              // });
 };
 });
>>>>>>> dd796eb84e5ab0e25c94b6a1349a0332463a2375
